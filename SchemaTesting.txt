

SCHEMA TESTING QUERY

--1. SCHEMA TESTING

--VIEW ALL THE TABLE WITH IN A SCHEMA
SELECT TABLE_NAME, TABLE_SCHEMA, TABLE_TYPE FROM INFORMATION_SCHEMA.TABLES ORDER BY TABLE_NAME;
SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES ORDER BY TABLE_NAME;
SELECT * FROM INFORMATION_SCHEMA.TABLES

--CHECK NUMBER OF COLUMN IN A TABLE
SELECT COUNT(*) AS TOT_COLUMNS FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME='EMPLOYEES';

--CHECK COLUMN NAME IN A TABLE
SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME='EMPLOYEES';

--CHECK DATATYPE OF A COLUMN
SELECT COLUMN_NAME, DATA_TYPE FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME='EMPLOYEES';

--CHECK NULL FIELD IN A TABLE
SELECT COLUMN_NAME, IS_NULLABLE FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME='EMPLOYEES';

--CHECK COLUMN KEY IN A TABLE
EXEC SP_PKEYS EMPLOYEES;
EXEC sp_fkeys EMPLOYEES;
SELECT TABLE_NAME, COLUMN_NAME, CONSTRAINT_NAME FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE;
SELECT TABLE_NAME, CONSTRAINT_NAME, CONSTRAINT_TYPE FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS;
SELECT * FROM SYS.key_constraints WHERE TYPE='PK';

--CHECK REFFERENTIAL CONSTRAINTS

SELECT CONSTRAINT_NAME, UNIQUE_CONSTRAINT_NAME FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS;

--CHECK LIST OF TABLE AND CREATED DATE
SELECT NAME, CRDATE FROM SYSOBJECTS WHERE xtype='U';

select * from sys.types;

--2. DATA INTEGRITY TESTING
INTEGRITY TESTING MAINLY FOCUSED IN INTEGRITY CONSTRAINTS
--SQL CONSTRINTS ARE USED TO SPECIFY RULES FOR DATA IN A TABLE. CONSTRAINTS CAN BE SPECIFIED WHEN THE TABLE IS CREATED
  WITH THE CREATE TABLE STATEMENT, OR AFTER THE TABLE IS CREATED WITH THE ALTER TABLE STATEMENT STATEMENT.

CONSTRAINTS ARE: 
NOTNULL- ENSURES THAT COLUMN CAN NOT HAVE A NULL VALUE
UNIQUE - ENSURES THAT ALL VALUES IN A COLUMN ARE DIFFERENT
PRIMARY-  UNIQUELY IDENFTIFIES EACH ROW IN A TABLE. PRIMARY KEY SHOULD NOT HAVE NULL AND DUPLICATE VALUES
FOREIGN - UNIQUELY IDENTIFIES A ROW/RECORD IN ANOTHER TABLE
CHECK -  ENSURES THAT ALL VALUES IN A COLUMN SATISFIES A SPECIFIC CONDITIONS
DEFAULT- SETS A DEFAULT VALUE FOR A COLUMN WHEN NO VALUE IS SPECIFIED

--END--